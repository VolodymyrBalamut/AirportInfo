configuration: Release

before_build:
  - nuget restore
 
 
build:
  project: AirportInfo.sln
  verbosity: minimal
  publish_wap: true

test:
  assemblies:
    AirportInfo.MyTest.dll

artifacts:
  - path: AirportData\bin\Debug\AirportData.dll
    name: AirportData.dll

test_script:
 - .\packages\OpenCover.4.6.519\tools\OpenCover.Console.exe -register:user -target:"%xunit20%\xunit.console.x86.exe" -targetargs:".\AirportInfo.MyTest\bin\Debug\AirportInfo.MyTest.dll -noshadow" -filter:"+[AirportInfo*]* -[AirportInfo.MyTest*]*" -output:".\coverage.xml"
after_test:
  - ps: |
      $env:PATH = 'C:\msys64\usr\bin;' + $env:PATH
      Invoke-WebRequest -Uri 'https://codecov.io/bash' -OutFile codecov.sh
      bash codecov.sh -f "coverage.xml" -t 23f02c52-8d0d-43d6-a8ad-62f105eb173f